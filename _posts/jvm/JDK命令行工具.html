<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>JDK命令行工具 | Beldon</title><meta name="description" content="Beldon">
    <link rel="modulepreload" href="/assets/app.6951aaec.js"><link rel="modulepreload" href="/assets/JDK命令行工具.html.c42ebb5a.js"><link rel="modulepreload" href="/assets/JDK命令行工具.html.373f382a.js"><link rel="prefetch" href="/assets/index.html.cf8fcc42.js"><link rel="prefetch" href="/assets/contributing.html.482fce6f.js"><link rel="prefetch" href="/assets/index.html.6487ab7c.js"><link rel="prefetch" href="/assets/one.html.18fdaa65.js"><link rel="prefetch" href="/assets/index.html.f234c912.js"><link rel="prefetch" href="/assets/two.html.672620f6.js"><link rel="prefetch" href="/assets/JVM(HotSpot) 7种垃圾收集器的特点及使用场景.html.0fd551d1.js"><link rel="prefetch" href="/assets/JVM运行时数据区.html.3a36f2c9.js"><link rel="prefetch" href="/assets/jsr133.html.64473f1f.js"><link rel="prefetch" href="/assets/垃圾回收算法.html.e9b18ae0.js"><link rel="prefetch" href="/assets/k8s-conception.html.22e54a8c.js"><link rel="prefetch" href="/assets/k8s-install.html.c36adb05.js"><link rel="prefetch" href="/assets/k8s-main.html.17271916.js"><link rel="prefetch" href="/assets/example.html.6394d926.js"><link rel="prefetch" href="/assets/spring-boot-thin-jar.html.0062b8e8.js"><link rel="prefetch" href="/assets/404.html.265028f6.js"><link rel="prefetch" href="/assets/index.html.f2949449.js"><link rel="prefetch" href="/assets/contributing.html.cf9badb4.js"><link rel="prefetch" href="/assets/index.html.9cbdeb8a.js"><link rel="prefetch" href="/assets/one.html.21c75ce4.js"><link rel="prefetch" href="/assets/index.html.076792ce.js"><link rel="prefetch" href="/assets/two.html.280e21ae.js"><link rel="prefetch" href="/assets/JVM(HotSpot) 7种垃圾收集器的特点及使用场景.html.ea138cb5.js"><link rel="prefetch" href="/assets/JVM运行时数据区.html.45d21e2d.js"><link rel="prefetch" href="/assets/jsr133.html.c99bc0b8.js"><link rel="prefetch" href="/assets/垃圾回收算法.html.fce6784e.js"><link rel="prefetch" href="/assets/k8s-conception.html.03d7f013.js"><link rel="prefetch" href="/assets/k8s-install.html.8e89225e.js"><link rel="prefetch" href="/assets/k8s-main.html.42e3cc55.js"><link rel="prefetch" href="/assets/example.html.ac0cd276.js"><link rel="prefetch" href="/assets/spring-boot-thin-jar.html.c49e7e5b.js"><link rel="prefetch" href="/assets/404.html.08a7d00f.js"><link rel="prefetch" href="/assets/404.0c79e1fa.js"><link rel="prefetch" href="/assets/Layout.eea7820e.js">
    <link rel="stylesheet" href="/assets/style.acf36ec1.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">Beldon</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">JDK命令行工具 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/_posts/jvm/JDK%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7.html#jps-虚拟机进程状态工具" class="router-link-active router-link-exact-active sidebar-item" aria-label="jps: 虚拟机进程状态工具"><!--[--><!--]--> jps: 虚拟机进程状态工具 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/_posts/jvm/JDK%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7.html#jstat-虚拟机统计信息监控工具" class="router-link-active router-link-exact-active sidebar-item" aria-label="jstat: 虚拟机统计信息监控工具"><!--[--><!--]--> jstat: 虚拟机统计信息监控工具 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/_posts/jvm/JDK%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7.html#jinfo-java配置信息工具" class="router-link-active router-link-exact-active sidebar-item" aria-label="jinfo: Java配置信息工具"><!--[--><!--]--> jinfo: Java配置信息工具 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/_posts/jvm/JDK%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7.html#jmap-java内存映射工具" class="router-link-active router-link-exact-active sidebar-item" aria-label="jmap: Java内存映射工具"><!--[--><!--]--> jmap: Java内存映射工具 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="jdk命令行工具" tabindex="-1"><a class="header-anchor" href="#jdk命令行工具" aria-hidden="true">#</a> JDK命令行工具</h1><h3 id="jps-虚拟机进程状态工具" tabindex="-1"><a class="header-anchor" href="#jps-虚拟机进程状态工具" aria-hidden="true">#</a> jps: 虚拟机进程状态工具</h3><p>jps(JVM Process Status Tool) 可以列出正在运行的虚拟机进程及可以显示虚拟机执行的主类、名称已经这些进程的本地虚拟机唯一id（Local Virtual Mache Identifier,LVMID）.</p><ul><li>命令格式：</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>jps [-q] [-mlvV] [&lt;hostid&gt;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>执行样例</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>~ jps -l
50354 jdk.jcmd/sun.tools.jps.Jps
44271
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>jps可以通过RMI协议查询开启了RMI服务的远程虚拟机进程的状态，hostid为RMI注册表中注册的主机名。</p><ul><li>jps的其他常用选项</li></ul><p><img src="https://www.github.com/beldon/static/raw/master/static/1539874509031.png" alt="jps工具主要选项"></p><h3 id="jstat-虚拟机统计信息监控工具" tabindex="-1"><a class="header-anchor" href="#jstat-虚拟机统计信息监控工具" aria-hidden="true">#</a> jstat: 虚拟机统计信息监控工具</h3><p>jstat(JVM Statistics Monitoring Tool)是用于监控虚拟机各种运行状态信息的命令行工具。</p><ul><li>命令格式</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>jstat -&lt;option&gt; [-t] [-h&lt;lines&gt;] &lt;vmid&gt; [&lt;interval&gt; [&lt;count&gt;]]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>“对于命令格式中的VMID与LVMID需要特别说明一下：如果是本地虚拟机进程，VMID与LVMID是一致的，如果是远程虚拟机进程，那VMID的格式应当是”:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[protocol：][//]lvmid[@hostname[：port]/servername]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>参数interval和count代表查询间隔和次数，如果省略这两个参数，说明只查询一次。假设需要每250毫秒查询一次进程2764垃圾收集状况，一共查询20次，那命令应当是：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>jstat-gc 2764 250 20
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>option</li></ul><p><img src="https://www.github.com/beldon/static/raw/master/static/1539875128847.png" alt="jstat 工具主要选项"></p><ul><li>执行示例</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>~ jstat -gcutil 50416
  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT    CGC    CGCT     GCT
  0.00 100.00  20.22  24.85  97.25  92.32      9    0.097     0    0.000     6    0.011    0.109
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>一些术语的中文解释 S0C：年轻代中第一个survivor（幸存区）的容量 (字节) S1C：年轻代中第二个survivor（幸存区）的容量 (字节) S0U：年轻代中第一个survivor（幸存区）目前已使用空间 (字节) S1U：年轻代中第二个survivor（幸存区）目前已使用空间 (字节) EC：年轻代中Eden（伊甸园）的容量 (字节) EU：年轻代中Eden（伊甸园）目前已使用空间 (字节) OC：Old代的容量 (字节) OU：Old代目前已使用空间 (字节) PC：Perm(持久代)的容量 (字节) PU：Perm(持久代)目前已使用空间 (字节) YGC：从应用程序启动到采样时年轻代中gc次数 YGCT：从应用程序启动到采样时年轻代中gc所用时间(s) FGC：从应用程序启动到采样时old代(全gc)gc次数 FGCT：从应用程序启动到采样时old代(全gc)gc所用时间(s) GCT：从应用程序启动到采样时gc用的总时间(s) NGCMN：年轻代(young)中初始化(最小)的大小 (字节) NGCMX：年轻代(young)的最大容量 (字节) NGC：年轻代(young)中当前的容量 (字节) OGCMN：old代中初始化(最小)的大小 (字节) OGCMX：old代的最大容量 (字节) OGC：old代当前新生成的容量 (字节) PGCMN：perm代中初始化(最小)的大小 (字节) PGCMX：perm代的最大容量 (字节) PGC：perm代当前新生成的容量 (字节) S0：年轻代中第一个survivor（幸存区）已使用的占当前容量百分比 S1：年轻代中第二个survivor（幸存区）已使用的占当前容量百分比 E：年轻代中Eden（伊甸园）已使用的占当前容量百分比 O：old代已使用的占当前容量百分比 P：perm代已使用的占当前容量百分比 S0CMX：年轻代中第一个survivor（幸存区）的最大容量 (字节) S1CMX ：年轻代中第二个survivor（幸存区）的最大容量 (字节) ECMX：年轻代中Eden（伊甸园）的最大容量 (字节) DSS：当前需要survivor（幸存区）的容量 (字节)（Eden区已满） TT： 持有次数限制 MTT ： 最大持有次数限制</li></ul><p><a href="https://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstat.html" target="_blank" rel="noopener noreferrer">jstat 官方文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="jinfo-java配置信息工具" tabindex="-1"><a class="header-anchor" href="#jinfo-java配置信息工具" aria-hidden="true">#</a> jinfo: Java配置信息工具</h3><p>jinfo(Configuration Info for Java)的作用是实时地查看和调整虚拟机各项参数。使用<code>jps -v</code>参数可以查看虚拟启动时显式指定的参数列表，但如果想知道未被显式指定的参数的系统默认值，除了去找资料外，就只能使用jinfo的-flag选项进行查询了，jinfo还可以使用-sysprops选项把虚拟机进程的System.getProperties（）的内容打印出来。</p><ul><li>命令格式</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>jinfo &lt;option&gt; &lt;pid&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>option</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>where &lt;option&gt; is one of:
    -flag &lt;name&gt;         to print the value of the named VM flag
    -flag [+|-]&lt;name&gt;    to enable or disable the named VM flag
    -flag &lt;name&gt;=&lt;value&gt; to set the named VM flag to the given value
    -flags               to print VM flags
    -sysprops            to print Java system properties
    &lt;no option&gt;          to print both VM flags and system properties
    -? | -h | --help | -help to print this help message
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>执行示例</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>~ jinfo -flag CICompilerCount 50416
-XX:CICompilerCount=4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>jinfo 动态调整参数 <a href="https://www.cnblogs.com/gossip/p/6112471.html" target="_blank" rel="noopener noreferrer">参考链接<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="jmap-java内存映射工具" tabindex="-1"><a class="header-anchor" href="#jmap-java内存映射工具" aria-hidden="true">#</a> jmap: Java内存映射工具</h3><p>jmap（Memory Map for Java）命令用于生成堆转储快照（一般称为heapdump或dump文件）。</p><p>jmap的作用并不仅仅是为了获取dump文件，它还可以查询finalize执行队列、Java堆和永久代的详细信息，如空间使用率、当前用的是哪种收集器等。</p><ul><li>命令格式</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>jmap &lt;option&gt; vmid
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://www.github.com/beldon/static/raw/master/static/1539876969660.png" alt="jmap工具主要选项"></p><p>在jdk11下已经去掉了 <code>-heap</code>参数，jdk11下的选项如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>~ jmap --help
Usage:
    jmap -clstats &lt;pid&gt;
        to connect to running process and print class loader statistics
    jmap -finalizerinfo &lt;pid&gt;
        to connect to running process and print information on objects awaiting finalization
    jmap -histo[:live] &lt;pid&gt;
        to connect to running process and print histogram of java object heap
        if the &quot;live&quot; suboption is specified, only count live objects
    jmap -dump:&lt;dump-options&gt; &lt;pid&gt;
        to connect to running process and dump java heap
    jmap -? -h --help
        to print this help message

    dump-options:
      live         dump only live objects; if not specified,
                   all objects in the heap are dumped.
      format=b     binary format
      file=&lt;file&gt;  dump heap to &lt;file&gt;

    Example: jmap -dump:live,format=b,file=heap.bin &lt;pid&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>执行示例</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>- jmap-dump：format=b,file=demo.bin 3500
Dumping heap to /tmp/demo.bin……
Heap dump file created
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1047325205@qq.com">beldon</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.6951aaec.js" defer></script>
  </body>
</html>
